{"version":3,"sources":["app/familyChart/FamilyChartActions.js","App.js","index.js"],"names":["FamilyTree","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","contRef","React","createRef","_createClass","key","value","axios","get","then","response","console","log","catch","error","createElement","style","maxWidth","margin","className","id","ref","this","position","Component","App","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"wSAOqBA,EAAU,SAAAC,GAAAC,YAAAF,EAAAC,GAAA,IAAAE,EAAAC,YAAAJ,GAAA,SAAAA,IAAA,IAAAK,EAAAC,YAAA,KAAAN,GAAA,QAAAO,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GACD,OADCP,EAAAF,EAAAU,KAAAC,MAAAX,EAAA,OAAAY,OAAAL,KAC7BM,QAAUC,IAAMC,YAAWb,EA+I1B,OA/I0Bc,YAAAnB,EAAA,EAAAoB,IAAA,oBAAAC,MAE3B,WAEEC,IAAMC,IAAI,cACPC,MAAK,SAAAC,GAAQ,OAAKC,QAAQC,IAAI,WAAYF,MAC1CG,OAAM,SAAAC,GAAK,OAAIH,QAAQG,MAAMA,QAoHjC,CAAAT,IAAA,SAAAC,MAMD,WAEE,OAAOJ,IAAAa,cAAA,OAAKC,MAAO,CAAEC,SAAU,SAAUC,OAAQ,SAC/ChB,IAAAa,cAAA,OAAKI,UAAU,OACbjB,IAAAa,cAAA,OAAKI,UAAU,cACbjB,IAAAa,cAAA,OAAKI,UAAU,KAAKC,GAAG,QAAQC,IAAKC,KAAKrB,QAASe,MAAO,CAAEO,SAAU,eAEvErB,IAAAa,cAAA,OAAKI,UAAU,cACbjB,IAAAa,cAAA,OAAKK,GAAG,YAAYD,UAAU,cAGlCjB,IAAAa,cAAA,OAAKK,GAAG,YAAYD,UAAU,eAIjClC,EAhJ4B,CAASiB,IAAMsB,W,MCF/B,SAASC,IACtB,OACEvB,IAAAa,cAAA,OAAKI,UAAU,OACbjB,IAAAa,cAAC9B,EAAU,OCHjB,IAAMyC,EAAcC,SAASC,eAAe,QAC5CC,IAASC,OACP5B,IAAAa,cAACb,IAAM6B,WAAU,KACf7B,IAAAa,cAACU,EAAG,OAENC,K","file":"static/js/main.6b668f77.chunk.js","sourcesContent":["import React from \"react\";\r\nimport f3 from \"family-chart\"; // npm i family-chart\r\nimport \"./family-chart.css\"; // create file 'family-chart.css' in same directory, copy/paste css from examples/create-tree\r\nimport M from \"materialize-css\";\r\nimport { Form } from \"./view/elements/Form.js\"\r\nimport axios from 'axios';\r\n\r\nexport default class FamilyTree extends React.Component {\r\n  contRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n\r\n    axios.get('/data.json')\r\n      .then(response =>  console.log(\"response\", response))\r\n      .catch(error => console.error(error));\r\n\r\n    // fetch(\"/app/familyChart/data.json\").then(r => {\r\n    //   console.log(\"r\", r)\r\n    //   r.json()}).then(data => {\r\n    //   console.log(\"dataExt\", data)\r\n    //   initProcess(data)\r\n    // })\r\n\r\n\r\n    function initProcess(dataJson) {\r\n      const cont = document.querySelector(\"#chart\")\r\n\r\n      if (!this.contRef.current) return;\r\n\r\n      const card_dim = { w: 220, h: 70, text_x: 75, text_y: 15, img_w: 60, img_h: 60, img_x: 5, img_y: 5 }\r\n      const card_display = cardDisplay();\r\n      const card_edit = cardEditParams();\r\n      const store = f3.createStore({\r\n        data: dataJson,\r\n        card_display: [d => d.data.label || '', d => d.data.desc || ''],\r\n        mini_tree: true,\r\n        hide_rels: true,\r\n        node_separation: 250,\r\n        level_separation: 150,\r\n        custom_elements: [{ el: customAddBtn(card_dim), lis: customAddBtnListener, query: \".customAddBtn\" }],\r\n        card_dim\r\n      }),\r\n        view = f3.d3AnimationView({\r\n          store,\r\n          cont: document.querySelector(\"#chart\"),\r\n          card_edit\r\n        }),\r\n        Card = f3.elements.Card({\r\n          store,\r\n          svg: view.svg,\r\n          card_dim: {\r\n            w: 220,\r\n            h: 70,\r\n            text_x: 75,\r\n            text_y: 15,\r\n            img_w: 60,\r\n            img_h: 60,\r\n            img_x: 5,\r\n            img_y: 5\r\n          },\r\n          card_display: [\r\n            (d) => `${d.data[\"first name\"] || \"\"} ${d.data[\"last name\"] || \"\"}`,\r\n            (d) => `${d.data[\"birthday\"] || \"\"}`\r\n          ],\r\n          cardEditForm,\r\n          addRelative: f3.handlers.AddRelative({ store, cont, card_dim, cardEditForm, labels: { mother: 'Add mother' } }),\r\n          mini_tree: true,\r\n          link_break: false\r\n        });\r\n\r\n      view.setCard(Card);\r\n      store.setOnUpdate((props) => view.update(props || {}));\r\n      store.update.tree({ initial: true });\r\n\r\n      // function data() {\r\n      //   return [\r\n      //     {\r\n      //       id: \"0\",\r\n      //       rels: {\r\n      //         spouses: null,\r\n      //         father: null,\r\n      //         mother: null,\r\n      //         children: null\r\n      //       },\r\n      //       data: {\r\n      //         \"first name\": \"Agnus\",\r\n      //         \"last name\": \"\",\r\n      //         birthday: \"1970\",\r\n      //         avatar:\r\n      //           \"https://static8.depositphotos.com/1009634/988/v/950/depositphotos_9883921-stock-illustration-no-user-profile-picture.jpg\",\r\n      //         gender: \"M\"\r\n      //       }\r\n      //     },\r\n\r\n      //   ];\r\n      // }\r\n\r\n      function cardEditForm(props) {\r\n        const postSubmit = props.postSubmit;\r\n        props.postSubmit = (ps_props) => { postSubmit(ps_props) }\r\n        const el = document.querySelector('#form_modal'),\r\n          modal = M.Modal.getInstance(el),\r\n          edit = { el, open: () => modal.open(), close: () => modal.close() }\r\n        Form({ ...props, card_edit, card_display, edit })\r\n      }\r\n\r\n      function cardDisplay() {\r\n        const d1 = d => `${d.data['first name'] || ''} ${d.data['last name'] || ''}`,\r\n          d2 = d => `${d.data['birthday'] || ''}`\r\n        d1.create_form = \"{first name} {last name}\"\r\n        d2.create_form = \"{birthday}\"\r\n\r\n        return [d1, d2]\r\n      }\r\n\r\n\r\n      function cardEditParams() {\r\n        return [\r\n          { type: 'text', placeholder: 'first name', key: 'first name' },\r\n          { type: 'text', placeholder: 'last name', key: 'last name' },\r\n          { type: 'text', placeholder: 'birthday', key: 'birthday' },\r\n          { type: 'text', placeholder: 'avatar', key: 'avatar' }\r\n        ]\r\n      }\r\n\r\n      const modal = document.body.appendChild(document.createElement(\"div\"));\r\n      modal.setAttribute(\"id\", \"form_modal\");\r\n      modal.setAttribute(\"class\", \"modal\");\r\n      M.Modal.init(modal);\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  render() {\r\n\r\n    return <div style={{ maxWidth: '1100px', margin: 'auto' }}>\r\n      <div className=\"row\">\r\n        <div className=\"col s12 m9\">\r\n          <div className=\"f3\" id=\"chart\" ref={this.contRef} style={{ position: 'relative' }}></div>\r\n        </div>\r\n        <div className=\"col s12 m3\">\r\n          <div id=\"edit_cont\" className=\"card p5\"></div>\r\n        </div>\r\n      </div>\r\n      <div id=\"form_data\" className=\"modal\">\r\n\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nfunction customAddBtn(card_dim) {\r\n  return (`\r\n    <g class=\"customAddBtn\" style=\"cursor: pointer\">\r\n      <g transform=\"translate(${card_dim.w - 12},${card_dim.h - 12})scale(.08)\">\r\n        <circle r=\"100\" fill=\"#fff\" />\r\n        <g transform=\"translate(-50,-45)\">\r\n          <line\r\n            x1=\"10\" x2=\"90\" y1=\"50\" y2=\"50\"\r\n            stroke=\"currentColor\" stroke-width=\"20\" stroke-linecap=\"round\"\r\n          />\r\n          <line\r\n            x1=\"50\" x2=\"50\" y1=\"10\" y2=\"90\"\r\n            stroke=\"currentColor\" stroke-width=\"20\" stroke-linecap=\"round\"\r\n          />\r\n        </g>\r\n      </g>\r\n    </g>\r\n  `)\r\n}\r\n\r\nfunction customAddBtnListener(store, props) {\r\n  console.log(props.card)\r\n  console.log(props.d)\r\n}\r\n","import React from \"react\";\r\nimport FamilyTree from \"./app/familyChart/FamilyChartActions\";\r\nimport 'materialize-css/dist/css/materialize.min.css'\r\n\r\n\r\nexport default function App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <FamilyTree/>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  rootElement\r\n);\r\n"],"sourceRoot":""}