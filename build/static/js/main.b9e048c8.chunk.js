(this["webpackJsonpfamily-chart-react"]=this["webpackJsonpfamily-chart-react"]||[]).push([[0],{17:function(e){e.exports=JSON.parse('[{"id":"0","rels":{"spouses":null,"father":null,"mother":null,"children":null},"data":{"first name":"Agnus","last name":"","birthday":"1970","avatar":"https://static8.depositphotos.com/1009634/988/v/950/depositphotos_9883921-stock-illustration-no-user-profile-picture.jpg","gender":"M"}}]')},18:function(e,t,a){e.exports=a(35)},23:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),l=a(11),i=a(1),d=a(2),s=a(5),u=a(8),m=a(9),p=a(6),f=a.n(p),h=(a(23),a(12)),y=a.n(h);function v(e){var t=e.datum,a=e.rel_datum,n=e.store,r=e.rel_type,c=e.card_edit,o=e.postSubmit,l=e.card_display,i=e.edit,d=i.el,s=i.open,u=i.close;function m(e){console.log("update"),e.preventDefault(),new FormData(e.target).forEach((function(e,a){return t.data[a]=e})),u(),o()}function p(){u(),o({delete:!0})}d.innerHTML='\n      <div class="modal-content">\n        <form>\n          <div>\n            <div style="text-align: left">\n              <span style="display: '.concat(t.to_add||a?"none":null,'; float: right; cursor: pointer" class="red-text delete">delete</span>\n            </div>\n            <div>\n              <label><input type="radio" name="gender" value="M" ').concat("M"===t.data.gender?"checked":"",'><span>male</span></label><br>\n              <label><input type="radio" name="gender" value="F" ').concat("F"===t.data.gender?"checked":"","><span>female</span></label><br>\n            </div>\n          </div>\n          ").concat(function(e){return e.map((function(e){return"text"===e.type?'<input type="text" name="'.concat(e.key,'" placeholder="').concat(e.placeholder,'" value="').concat(t.data[e.key]||"",'">'):"textarea"===e.type?'<textarea class="materialize-textarea" name="'.concat(e.key,'" placeholder="').concat(e.placeholder,'">').concat(t.data[e.key]||"","</textarea>"):""})).join("\n")}(c),"\n          ").concat("son"===r||"daughter"===r?function(){var e=n.getData();return'\n      <div>\n        <label>Select other</label>\n        <select name="other_parent" style="display: block">\n          '.concat(a.rels.spouses&&0!==a.rels.spouses.length?a.rels.spouses.map((function(t,a){var n=e.find((function(e){return e.id===t}));return'<option value="'.concat(t,'" ').concat(0===a?"selected":"",">").concat(l[0](n),"</option>")})).join("\n"):"",'\n          <option value="',"_new",'">NEW</option>\n        </select>\n      </div>\n    ')}():"",'\n          <br><br>\n          <div style="text-align: center">\n            <button type="submit" class="btn">submit</button>\n          </div>\n        </form>\n      </div>\n    '),d.querySelector("form").addEventListener("submit",m),d.querySelector(".delete").addEventListener("click",p),s()}var b=a(17),_=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).chartRef=r.a.createRef(),n.contRef=r.a.createRef(),n.handleF3=n.handleF3.bind(Object(s.a)(n)),n.state={chartState:null},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.contRef.current&&function(){var e=document.querySelector("#chart"),t={w:220,h:70,text_x:75,text_y:15,img_w:60,img_h:60,img_x:5,img_y:5},a=function(){var e=function(e){return"".concat(e.data["first name"]||""," ").concat(e.data["last name"]||"")},t=function(e){return"".concat(e.data.birthday||"")};return e.create_form="{first name} {last name}",t.create_form="{birthday}",[e,t]}(),n=[{type:"text",placeholder:"first name",key:"first name"},{type:"text",placeholder:"last name",key:"last name"},{type:"text",placeholder:"birthday",key:"birthday"},{type:"text",placeholder:"avatar",key:"avatar"}],r=f.a.createStore({data:b,card_display:[function(e){return e.data.label||""},function(e){return e.data.desc||""}],mini_tree:!0,hide_rels:!0,node_separation:250,level_separation:150,custom_elements:[{el:g(t),lis:x,query:".customAddBtn"}],card_dim:t}),c=f.a.d3AnimationView({store:r,cont:document.querySelector("#chart"),card_edit:n}),o=f.a.elements.Card({store:r,svg:c.svg,card_dim:{w:220,h:70,text_x:75,text_y:15,img_w:60,img_h:60,img_x:5,img_y:5},card_display:[function(e){return"".concat(e.data["first name"]||""," ").concat(e.data["last name"]||"")},function(e){return"".concat(e.data.birthday||"")}],cardEditForm:i,addRelative:f.a.handlers.AddRelative({store:r,cont:e,card_dim:t,cardEditForm:i,labels:{mother:"Add mother"}}),mini_tree:!0,link_break:!1});function i(e){var t=e.postSubmit;e.postSubmit=function(e){t(e)};var r=document.querySelector("#form_modal"),c=y.a.Modal.getInstance(r),o={el:r,open:function(){return c.open()},close:function(){return c.close()}};v(Object(l.a)(Object(l.a)({},e),{},{card_edit:n,card_display:a,edit:o}))}c.setCard(o),r.setOnUpdate((function(e){return c.update(e||{})})),r.update.tree({initial:!0}),console.log("store",r);var d=document.body.appendChild(document.createElement("div"));d.setAttribute("id","form_modal"),d.setAttribute("class","modal"),y.a.Modal.init(d),this.chart=new f.a(this.contRef.current)}()}},{key:"handleF3",value:function(){var e=this.chart.getState();console.log("chartState",e)}},{key:"render",value:function(){return r.a.createElement("div",{style:{maxWidth:"1100px",margin:"auto"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m9",ref:this.chartRef},r.a.createElement("div",{className:"f3",id:"chart",ref:this.contRef,style:{position:"relative"}})),r.a.createElement("div",{className:"col s12 m3"},r.a.createElement("div",{id:"edit_cont",className:"card p5"}))),r.a.createElement("div",{id:"form_data",className:"modal"}),r.a.createElement("button",{onClick:this.handleF3},"get data"))}}]),a}(r.a.Component);function g(e){return'\n    <g class="customAddBtn" style="cursor: pointer">\n      <g transform="translate('.concat(e.w-12,",").concat(e.h-12,')scale(.08)">\n        <circle r="100" fill="#fff" />\n        <g transform="translate(-50,-45)">\n          <line\n            x1="10" x2="90" y1="50" y2="50"\n            stroke="currentColor" stroke-width="20" stroke-linecap="round"\n          />\n          <line\n            x1="50" x2="50" y1="10" y2="90"\n            stroke="currentColor" stroke-width="20" stroke-linecap="round"\n          />\n        </g>\n      </g>\n    </g>\n  ')}function x(e,t){console.log(t.card),console.log(t.d)}a(33);function k(){return r.a.createElement("div",{className:"App"},r.a.createElement(_,null))}var E=document.getElementById("root");o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),E)}},[[18,1,2]]]);
//# sourceMappingURL=main.b9e048c8.chunk.js.map